<div class="mx-auto w-full max-w-md mb-6">
  <form class="max-w-md mx-auto">
    <div class="relative">
      <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
        <svg
          class="w-4 h-4 text-gray-500"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 20 20"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
          />
        </svg>
      </div>
      <input
        type="text"
        [(ngModel)]="searchQuery"
        [ngModelOptions]="{ standalone: true}"
        (input)="onSearch()"
        class="block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"
        placeholder="Search by user name, movie title, or function date..."
      />
    </div>
  </form>
</div>

<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
  <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
    <thead class="text-xs text-white uppercase bg-customBlue dark:bg-customDarkgrey">
      <tr>
        <th scope="col" class="px-6 py-3">Invoice ID</th>
        <th scope="col" class="px-6 py-3">User ID</th>
        <th scope="col" class="px-6 py-3">User Name</th>
        <th scope="col" class="px-6 py-3">Price per Ticket</th>
        <th scope="col" class="px-6 py-3">Total Price</th>
        <th scope="col" class="px-6 py-3">Purchase Date</th>
        <th scope="col" class="px-6 py-3">Seats</th>
        <th scope="col" class="px-6 py-3">Movie Title</th>
        <th scope="col" class="px-6 py-3">Function Date</th>
        <th scope="col" class="px-6 py-3">Function Time</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let purchase of filteredPurchases()"
        class="odd:bg-customGrey even:bg-white border-b dark:border-gray-700"
      >
        <td class="px-6 py-4">{{ purchase.invoice_id }}</td>
        <td class="px-6 py-4">{{ purchase.user_id }}</td>
        <td class="px-6 py-4">{{ purchase.user_name }}</td>
        <td class="px-6 py-4">{{ purchase.price_per_ticket }}</td>
        <td class="px-6 py-4">{{ purchase.total_price }}</td>
        <td class="px-6 py-4">{{ purchase.purchase_date | date: 'shortDate' }}</td>
        <td class="px-6 py-4">
          <div class="flex flex-wrap">
            <p
              *ngFor="let seat of purchase.seats"
              class="inline-block text-xs px-2 py-1"
            >
              {{ seat }}
            </p>
          </div>
        </td>
        <td class="px-6 py-4">{{ purchase.movie_title }}</td>
        <td class="px-6 py-4">{{ purchase.function_date | date: 'shortDate' }}</td>
        <td class="px-6 py-4">{{ purchase.function_time }}</td>
      </tr>
    </tbody>
  </table>
</div>
